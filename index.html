<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Synthia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Scott Davis <scott@thirstyhead.com>">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <style>
      label{
        display: block;
      }

      label:
    </style>
    
    <script>
      window.addEventListener('load', init);
      function init(){
        const speechForm = document.querySelector('#speechForm');
        const speechSettingsForm = document.querySelector('#speechSettingsForm');

        speechForm.addEventListener('submit', (event) => {
          event.preventDefault();
          const fields = new FormData(speechForm);
          const settings = new FormData(speechSettingsForm);
          const options = {
            rate: settings.get('rate')
          }
          speak(fields.get('text-to-speak'), options);
        });

        speechSettingsForm.addEventListener('submit', (event) => {
          event.preventDefault();
        });

        speechSettingsForm.addEventListener('input', (event) => {
          const settings = new FormData(speechSettingsForm);

        });

        const rateField = document.querySelector('#rate');
        rateField.addEventListener('change', (event) => {
          const rateOutput = document.querySelector('#rateOutput');
          rateOutput.value = rateField.valueAsNumber;
        });
      }

      function speak(message, options){
        let utterance = new SpeechSynthesisUtterance(message);
        utterance.rate = options.rate;
        // utterance.pitch = options.pitch;
        window.speechSynthesis.speak(utterance);
      }

    </script>
  </head>

  <body>
    <h1>Hey, Synthia!</h1>
    <form id="speechForm">
      <input type="submit" 
             id="speakButton"
             value="Speak"></input>
      <input type="reset"
             value="Reset"></input>
      <p>
        <label for="textToSpeak">Text to Speak</label>
        <textarea name="text-to-speak" 
                  id="textToSpeak" 
                  rows="10"></textarea>
      </p>
    </form>

    <hr>
    <h2>Speech Settings</h2>
    <form id="speechSettingsForm">
      <input type="reset"
             value="Reset"></input>

      <p>
        <label for="rate">Rate</label>
        <input type="range"
               name="rate"
               id="rate"
               value="1"
               min="0.5"
               max="10"
               step="0.5">
        <output for="rate"
                name="rate-output"
                id="rateOutput"
                value="1">1</output>
      </p>
    </form>











  </body>
</html>
